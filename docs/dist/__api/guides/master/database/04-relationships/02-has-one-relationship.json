{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"Has One"}]},{"type":"element","tag":"h1","props":{"id":"has-one"},"children":[{"type":"element","tag":"a","props":{"href":"#has-one","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Has One"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"HasOne"}]},{"type":"text","value":" relationship creates a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one-to-one"}]},{"type":"text","value":" relationship between two models. A great example of this is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"a user has one profile"}]},{"type":"text","value":"."}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#relationship-models"},"children":[{"type":"text","value":"Relationship models"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#custom-foreign-key"},"children":[{"type":"text","value":"Custom foreign key"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#custom-local-key"},"children":[{"type":"text","value":"Custom local key"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#table-structure"},"children":[{"type":"text","value":"Table structure"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#whats-next"},"children":[{"type":"text","value":"What's next?"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"relationship-models"},"children":[{"type":"element","tag":"a","props":{"href":"#relationship-models","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Relationship models"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Continuing with the user and the profile example. Following is the User model with the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"hasOne"}]},{"type":"text","value":" relationship."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"app/Models/User.ts"}]},{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> column<span class=\"token punctuation\">,</span> BaseModel<span class=\"token punctuation\">,</span> hasOne<span class=\"token punctuation\">,</span> HasOne <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ioc:Adonis/Lucid/Orm'</span>\n<span class=\"token keyword\">import</span> Profile <span class=\"token keyword\">from</span> <span class=\"token string\">'App/Models/Profile'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseModel</span> <span class=\"token punctuation\">{</span>\n<span class=\"dimer-highlight-code-line\">  @<span class=\"token function\">hasOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Profile<span class=\"token punctuation\">)</span></span><span class=\"dimer-highlight-code-line\">  <span class=\"token keyword\">public</span> profile<span class=\"token operator\">:</span> HasOne<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> Profile<span class=\"token operator\">></span></span><span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Profile model must have a foreign key column "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"userId"}]},{"type":"text","value":" defined on it."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"app/Models/Profile.ts"}]},{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> column<span class=\"token punctuation\">,</span> BaseModel <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ioc:Adonis/Lucid/Orm'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Profile</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseModel</span> <span class=\"token punctuation\">{</span>\n<span class=\"dimer-highlight-code-line\">  @<span class=\"token function\">column</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"dimer-highlight-code-line\">  <span class=\"token keyword\">public</span> userId<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"custom-foreign-key"},"children":[{"type":"element","tag":"a","props":{"href":"#custom-foreign-key","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Custom foreign key"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"foreignKey"}]},{"type":"text","value":" is the camelCase representation of the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"parent model name"}]},{"type":"text","value":" and its primary key."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Parent Model Name"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Primary Key"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Foreign Key"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"userId"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, you can also define a custom foreign key."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"@<span class=\"token function\">hasOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Profile<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  foreignKey<span class=\"token operator\">:</span> <span class=\"token string\">'profileUserId'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> profile<span class=\"token operator\">:</span> HasOne<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> Profile<span class=\"token operator\">></span>\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"custom-local-key"},"children":[{"type":"element","tag":"a","props":{"href":"#custom-local-key","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Custom local key"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The local key is always the primary key of the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"parent model"}]},{"type":"text","value":", but can be defined explicitly."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"@<span class=\"token function\">hasOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Profile<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  localKey<span class=\"token operator\">:</span> <span class=\"token string\">'uuid'</span><span class=\"token punctuation\">,</span>\n  foreignKey<span class=\"token operator\">:</span> <span class=\"token string\">'profileUserId'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> profile<span class=\"token operator\">:</span> HasOne<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> Profile<span class=\"token operator\">></span>\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"table-structure"},"children":[{"type":"element","tag":"a","props":{"href":"#table-structure","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Table structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Following is an example table describing the relationship at the database level."}]},{"type":"element","tag":"div","props":{"className":["alert","alert-note"]},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lucid models doesn't rely on the database level foreign key constraint. It just want the columns to be present and must be of same data types."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"src":"https://res.cloudinary.com/adonis-js/image/upload/q_auto,w_700,f_auto,fl_lossy/v1588081758/adonisjs.com/has-one.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"whats-next"},"children":[{"type":"element","tag":"a","props":{"href":"#whats-next","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"What's next?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The preloading and persistance API for a has one relationship is already covered in the "},{"type":"element","tag":"a","props":{"href":"/guides/model-relations/introduction#preloading-relationship"},"children":[{"type":"text","value":"introduction guide"}]},{"type":"text","value":", we recommend reading all of the the sections."}]}]}
