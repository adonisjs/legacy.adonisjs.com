{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"Static Files"}]},{"type":"element","tag":"h1","props":{"id":"static-files"},"children":[{"type":"element","tag":"a","props":{"href":"#static-files","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Static Files"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"AdonisJS comes with an inbuilt static file server to serve files from a dedicated directory. By the end of this guide, you will know how to configure and use the static file server."}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#setup"},"children":[{"type":"text","value":"Setup"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#usage"},"children":[{"type":"text","value":"Usage"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#how-it-works"},"children":[{"type":"text","value":"How it works?"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#using-a-custom-directory"},"children":[{"type":"text","value":"Using A Custom Directory"}]}]}]}]},{"type":"element","tag":"div","props":{"className":["alert","alert-note"]},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For performance reason, we do not recommend using AdonisJS static file server in production. You can use a web server (ie: Nginx, Apache, Caddy, etc.) or a CDN to serve your static assets."}]}]},{"type":"element","tag":"h2","props":{"id":"setup"},"children":[{"type":"element","tag":"a","props":{"href":"#setup","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The static file server is inbuilt into the core of the framework and hence there is no need to install any additional packages. However, do make sure that your project has "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"config/static.ts"}]},{"type":"text","value":" config file with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"enabled = true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the configuration file is missing, you can create one by copying the contents from this "},{"type":"element","tag":"a","props":{"href":"https://github.com/adonisjs/core/blob/develop/templates/config/static.txt"},"children":[{"type":"text","value":"url"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Next, open the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":".adonisrc.json"}]},{"type":"text","value":" file and make sure that "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"public/**"}]},{"type":"text","value":" glob pattern is in the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"metaFiles"}]},{"type":"text","value":" array."}]},{"type":"element","tag":"div","props":{"className":["alert","alert-tip"]},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"metaFiles"}]},{"type":"text","value":" tells AdonisJS compiler to copy the mentioned files to the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"build"}]},{"type":"text","value":" folder."}]}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":".adonisrc.json"}]},{"type":"element","tag":"pre","props":{"className":["language-json","line-numbers"],"dataLine":"5"},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token property\">\"metaFiles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\".env\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\".adonisrc.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"resources/views/**/*.edge\"</span><span class=\"token punctuation\">,</span>\n<span class=\"dimer-highlight-code-line\">  <span class=\"token string\">\"public/**\"</span></span><span class=\"token punctuation\">]</span>\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"element","tag":"a","props":{"href":"#usage","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"AdonisJS will serve all files from the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" directory to the internet. For demonstration, let's create a new "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":".css"}]},{"type":"text","value":" file inside this directory."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"public/style.css"}]},{"type":"element","tag":"pre","props":{"className":["language-css","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #222<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, start the development server by running "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"node ace serve --watch"}]},{"type":"text","value":" command and visit "},{"type":"element","tag":"a","props":{"href":"http://localhost:3333/style.css"},"children":[{"type":"text","value":"http://localhost:3333/style.css"}]},{"type":"text","value":" to view the contents of the CSS file."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"src":"https://res.cloudinary.com/adonis-js/image/upload/q_auto,w_700,f_auto,fl_lossy/v1584157353/adonisjs.com/static-assets.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"how-it-works"},"children":[{"type":"element","tag":"a","props":{"href":"#how-it-works","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"How it works?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If you notice carefully, the URL doesn't contain the directory name "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/public"}]},{"type":"text","value":". So, if you decide to change the directory name from public to something else, then your URLs will not be impacted."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"AdonisJS checks for static files before checking for routes. If a route pattern and a static file name collides, the static file will be given preference and served."}]}]},{"type":"element","tag":"h2","props":{"id":"using-a-custom-directory"},"children":[{"type":"element","tag":"a","props":{"href":"#using-a-custom-directory","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Using A Custom Directory"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can customize the directory for storing static files by updating the value of "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"directories.public"}]},{"type":"text","value":" key inside the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":".adonisrc.json"}]},{"type":"text","value":" file."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":".adonisrc.json"}]},{"type":"element","tag":"pre","props":{"className":["language-json","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token property\">\"directories\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"public\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets\"</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also, make sure to update the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"metaFiles"}]},{"type":"text","value":" array and restart the server."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":".adonisrc.json"}]},{"type":"element","tag":"pre","props":{"className":["language-diff-json","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"\"metaFiles\": [\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span><span class=\"token line\"> \".env\",\n</span><span class=\"token prefix unchanged\"> </span><span class=\"token line\"> \".adonisrc.json\",\n</span><span class=\"token prefix unchanged\"> </span><span class=\"token line\"> \"resources/views/**/*.edge\",\n</span></span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span><span class=\"token line\"> \"public/**\"\n</span></span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span><span class=\"token line\"> \"assets/**\"\n</span></span>]\n"}]}]}]}]}
