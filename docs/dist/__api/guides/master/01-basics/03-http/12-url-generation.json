{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"URL Generation"}]},{"type":"element","tag":"h1","props":{"id":"url-generation"},"children":[{"type":"element","tag":"a","props":{"href":"#url-generation","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"URL Generation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This guide covers the API around generating plain and signed URLs for the registered routes. By the end of this guide, you will know:"}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#what-is-url-generation"},"children":[{"type":"text","value":"What is URL Generation?"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#generating-urls"},"children":[{"type":"text","value":"Generating URLs"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#defining-params"},"children":[{"type":"text","value":"Defining Params"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#defining-query-string"},"children":[{"type":"text","value":"Defining Query String"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#using-route-names"},"children":[{"type":"text","value":"Using Route Names"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#generating-signed-urls"},"children":[{"type":"text","value":"Generating Signed URLs"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#expiring-signed-urls"},"children":[{"type":"text","value":"Expiring Signed URLs"}]}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How to generate plain URLs for registered routes."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Using signed URLs for tasks like email verification."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How to assign unique names to your routes."}]}]},{"type":"element","tag":"h2","props":{"id":"what-is-url-generation"},"children":[{"type":"element","tag":"a","props":{"href":"#what-is-url-generation","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"What is URL Generation?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Even though the routes are defined inside the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"start/routes.ts"}]},{"type":"text","value":" file, you need to reference them at several other places. For example:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Redirecting the request to a URL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"An anchor tag in your HTML document"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Or, the form action"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A simple approach is to hardcode the URLs in all places. However, if you decide to change the routes later, you will have to find all the harcoded URLs and update them. A better approach is to generate the URLs dynamically."}]},{"type":"element","tag":"h2","props":{"id":"generating-urls"},"children":[{"type":"element","tag":"a","props":{"href":"#generating-urls","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Generating URLs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"AdonisJS provides helpers for making URLs for the registered routes. You can reference routes either by their "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Controller.action"}]},{"type":"text","value":" name or by using the route unique name. For example:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Begin by defining a route"}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'UsersController.show'</span><span class=\"token punctuation\">)</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, inside your controller or the view template, you can generate a URL by referencing the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Controller.action"}]},{"type":"text","value":" name."}]},{"type":"element","tag":"div","props":{"className":["tabs"]},"children":[{"type":"element","tag":"div","props":{"className":["tab-head"]},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{"dataTitle":"tab-1"},"children":[{"type":"text","value":"Inside JavaScript Code"}]},{"type":"element","tag":"li","props":{"dataTitle":"tab-2"},"children":[{"type":"text","value":"Inside View Templates"}]}]}]},{"type":"element","tag":"div","props":{"className":["tab-body"]},"children":[{"type":"element","tag":"div","props":{"className":["tab-item"],"id":"tab-1"},"children":[{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"Inside JavaScript Code"}]},{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token keyword\">import</span> Route <span class=\"token keyword\">from</span> <span class=\"token string\">'@ioc:Adonis/Core/Route'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UsersController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">index</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> response <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    response<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span>\n<span class=\"dimer-highlight-code-line\">      Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'UsersController.show'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]}]},{"type":"element","tag":"div","props":{"className":["tab-item"],"id":"tab-2"},"children":[{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"Inside View Templates"}]},{"type":"element","tag":"pre","props":{"className":["language-edge","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token mustache\"><span class=\"token punctuation\">{{</span> route(<span class=\"token string\"><span class=\"token punctuation\">'</span><span class=\"token other\">UsersController.show</span><span class=\"token punctuation\">'</span></span>, { params: { id: <span class=\"token number\">1</span> } }) <span class=\"token punctuation\">}}</span></span>\n"}]}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"defining-params"},"children":[{"type":"element","tag":"a","props":{"href":"#defining-params","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Defining Params"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The routes with parameters expects you to define the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"params"}]},{"type":"text","value":" values in order to make the URL, otherwise an exception will be raised."}]},{"type":"element","tag":"h3","props":{"id":"defining-query-string"},"children":[{"type":"element","tag":"a","props":{"href":"#defining-query-string","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Defining Query String"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also define the query string values when making the URL. For example:"}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'UsersController.show'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  qs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    status<span class=\"token operator\">:</span> <span class=\"token string\">'active'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Output: /users/1?status=active</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Query string with arrays"}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'UsersController.show'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  qs<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'email'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Output: /users/1?fields%5B0%5D=username&amp;fields%5B1%5D=email</span>\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-route-names"},"children":[{"type":"element","tag":"a","props":{"href":"#using-route-names","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Using Route Names"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In majority of cases, the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Controller.action"}]},{"type":"text","value":" will point to a single route. However, there can be cases, in which a controller action is shared by multiple routes. For example:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Showing a list of all the blog posts on the homepage as well as the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/posts"}]},{"type":"text","value":" URL and hence using the same controller action on both the routes."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PostsController.index'</span><span class=\"token punctuation\">)</span>\nRoute<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PostsController.index'</span><span class=\"token punctuation\">)</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In situations like these, it becomes mandatory to give unique names to your routes, so that you can generate correct URLs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"as"}]},{"type":"text","value":" method, you can assign a unique name to a route. The router will complain, if you attempt to assign the same name to the multiple routes and hence this is the best way to ensure that you are always referencing the correct route when generating URLs."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PostsController.index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">as</span><span class=\"token punctuation\">(</span><span class=\"token string\">'homepage'</span><span class=\"token punctuation\">)</span> ðŸ‘ˆ\n\nRoute<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PostsController.index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">as</span><span class=\"token punctuation\">(</span><span class=\"token string\">'listPosts'</span><span class=\"token punctuation\">)</span> ðŸ‘ˆ\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"makeUrl"}]},{"type":"text","value":" API remains the same, all you need to do is use the route name, instead of the controller action name."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'listPosts'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// or</span>\nRoute<span class=\"token punctuation\">.</span><span class=\"token function\">makeUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'homepage'</span><span class=\"token punctuation\">)</span>\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"generating-signed-urls"},"children":[{"type":"element","tag":"a","props":{"href":"#generating-signed-urls","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Generating Signed URLs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Signed URLs provides a neat way to generate URLs with hash signature appended to them. The hash ensures that the generated URL is not modified or tampered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A great use case of signed URLs is email verification. Instead of generating and storing email verification tokens inside the database, you can opt-in for signed URLs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For demonstration, let's create a dummy app to verify the user email address using a signed URL."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a route that will handle email verification"}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/verify/:email'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">hasValidSignature</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Marking email as verified'</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'Url is not valid'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">as</span><span class=\"token punctuation\">(</span><span class=\"token string\">'verifyEmail'</span><span class=\"token punctuation\">)</span>\n"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create another route to generate a signed URL to verify the email. In a real world app, you may send the signed URL to the user email address."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/get_verification_link'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> signedUrl <span class=\"token operator\">=</span> Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeSignedUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'verifyEmail'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      email<span class=\"token operator\">:</span> <span class=\"token string\">'foo@bar.com'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Click &lt;a href=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>signedUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">here&lt;/a> to verify email address</span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Visit "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/get_verification_link"}]},{"type":"text","value":" URL and click on the verification link. If you attempt to modify the URL, the signature verification will fail."}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Demo"}]},{"type":"element","tag":"div","props":{"className":["embed","video"]},"children":[{"type":"element","tag":"video","props":{"controls":true},"children":[{"type":"element","tag":"source","props":{"src":"https://res.cloudinary.com/adonis-js/video/upload/q_80/v1582524587/adonisjs.com/signed-route-email-verification_xujtpz.mp4","type":"video/mp4"},"children":[]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"what-just-happened"},"children":[{"type":"element","tag":"a","props":{"href":"#what-just-happened","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"What just happened?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"As you can notice, we directly pass the user email address to the URL, without worrying about someone changing it."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"request.hasValidSignature()"}]},{"type":"text","value":" tests the route signature and ensures that the URL is not tampered."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Just like "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"params"}]},{"type":"text","value":", you can also add "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"query string"}]},{"type":"text","value":" to the signed URL's and it will just work fine."}]}]},{"type":"element","tag":"h3","props":{"id":"expiring-signed-urls"},"children":[{"type":"element","tag":"a","props":{"href":"#expiring-signed-urls","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Expiring Signed URLs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, the signed URLs lives forever. However, you can add expiry to them at the time of generating one."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"  Route<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/get_verification_link'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> signedUrl <span class=\"token operator\">=</span> Route<span class=\"token punctuation\">.</span><span class=\"token function\">makeSignedUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'verifyEmail'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        email<span class=\"token operator\">:</span> <span class=\"token string\">'foo@bar.com'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"dimer-highlight-code-line\">      expiresIn<span class=\"token operator\">:</span> <span class=\"token string\">'30m'</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Click &lt;a href=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>signedUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">here&lt;/a> to verify email address</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n"}]}]}]}]}
