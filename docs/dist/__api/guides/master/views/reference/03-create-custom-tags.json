{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"Creating Custom Tags"}]},{"type":"element","tag":"h1","props":{"id":"creating-custom-tags"},"children":[{"type":"element","tag":"a","props":{"href":"#creating-custom-tags","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Creating Custom Tags"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So far you have used the inbuilt tags shipped with the core of the template engine. However, you can also create your own tags to add custom features. By the end of this guide, you will know:"}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#terms"},"children":[{"type":"text","value":"Terms"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#lexer"},"children":[{"type":"text","value":"Lexer"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#parser"},"children":[{"type":"text","value":"Parser"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#edge-buffer"},"children":[{"type":"text","value":"Edge Buffer"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#registering-tag"},"children":[{"type":"text","value":"Registering tag"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How to register a custom tag with the template engine."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A brief understanding of the Edge "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"lexer"}]},{"type":"text","value":" and the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"parser"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Self implemented an "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"svg"}]},{"type":"text","value":" tag for embedding SVG icons."}]}]},{"type":"element","tag":"h2","props":{"id":"terms"},"children":[{"type":"element","tag":"a","props":{"href":"#terms","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Terms"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lets briefly talk about the terms, we will using through out this guide."}]},{"type":"element","tag":"h3","props":{"id":"lexer"},"children":[{"type":"element","tag":"a","props":{"href":"#lexer","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Lexer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lexer is a program that breaks down the input source code into a sequence of tokens. Lexer for a real programming language like Javascript may have to inspect every character during the lexical analysis."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, Edge syntax is embedded into other languages like HTML, or Markdown. Hence, the edge lexer only inspects the "},{"type":"element","tag":"a","props":{"href":"https://github.com/edge-js/syntax"},"children":[{"type":"text","value":"whitelisted syntax"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When creating a custom tag, you will be dealing with only one type of lexer token, called the "},{"type":"element","tag":"a","props":{"href":"https://github.com/edge-js/lexer#tag-token"},"children":[{"type":"text","value":"tag token"}]},{"type":"text","value":". For example:"}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-edge","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token tag\"><span class=\"token function\">@svg</span>(<span class=\"token string\"><span class=\"token punctuation\">'</span>home<span class=\"token punctuation\">'</span></span>)</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The above mentioned "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"@svg"}]},{"type":"text","value":" tag will be tokenized into following JSON structure."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-json","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tag\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"welcome.edge\"</span><span class=\"token punctuation\">,</span>\n<span class=\"dimer-highlight-code-line\">    <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"dimer-highlight-code-line\">      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">,</span></span><span class=\"dimer-highlight-code-line\">      <span class=\"token property\">\"jsArg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'home'\"</span><span class=\"token punctuation\">,</span></span><span class=\"dimer-highlight-code-line\">      <span class=\"token property\">\"selfclosed\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></span><span class=\"dimer-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>    <span class=\"token property\">\"loc\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"line\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"col\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"line\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"col\"</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Most of the times, you will be dealing with the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"properties"}]},{"type":"text","value":" object."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"loc"}]},{"type":"text","value":" is mainly used for raising exceptions with correct line and the column number."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"children"}]},{"type":"text","value":" array is useful for block level tags like "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"@if"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"@each"}]},{"type":"text","value":". So, just ignore it for now."}]}]},{"type":"element","tag":"h3","props":{"id":"parser"},"children":[{"type":"element","tag":"a","props":{"href":"#parser","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Parser"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Within your tag implementation, you will parse the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"properties.jsArg"}]},{"type":"text","value":" value using the "},{"type":"element","tag":"a","props":{"href":"https://github.com/edge-js/parser"},"children":[{"type":"text","value":"edge-parser"}]},{"type":"text","value":". Parser returns an "},{"type":"element","tag":"a","props":{"href":"https://github.com/acornjs/acorn/tree/master/acorn"},"children":[{"type":"text","value":"acorn expression"}]},{"type":"text","value":" and using that expression, you can find if the user entered value is a variable, a string, an array or so on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you pass the value of "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"properties.jsArg"}]},{"type":"text","value":" to the parser, it will return the following JSON object. The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"type = 'Literal'"}]},{"type":"text","value":" means, it is a raw value and not reference to a variable."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-json","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Literal\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"end\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"home\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"raw\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'home'\"</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also modify these expressions and then use the parser again convert it back to valid Javascript code."}]},{"type":"element","tag":"h3","props":{"id":"edge-buffer"},"children":[{"type":"element","tag":"a","props":{"href":"#edge-buffer","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Edge Buffer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Edge buffer is the final piece in the puzzle. Once you are done parsing/validating the user input. You can write back to the compiled output using the Edge buffer."}]},{"type":"element","tag":"h2","props":{"id":"registering-tag"},"children":[{"type":"element","tag":"a","props":{"href":"#registering-tag","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Registering tag"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's begin by creating a new edge tag inside "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"app/ViewTags/Svg.ts"}]},{"type":"text","value":" file. You will have to create this file manually and then paste the following code snippet inside it."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"app/ViewTags/Svg.ts"}]},{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":""}]}]}]}]}
