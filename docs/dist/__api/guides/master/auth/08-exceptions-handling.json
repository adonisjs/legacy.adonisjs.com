{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"Handling exceptions"}]},{"type":"element","tag":"h1","props":{"id":"handling-exceptions"},"children":[{"type":"element","tag":"a","props":{"href":"#handling-exceptions","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Handling exceptions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All of the exceptions raised by the auth module are "},{"type":"element","tag":"a","props":{"href":"/guides/http/exception-handling#self-handled-exceptions"},"children":[{"type":"text","value":"self handled"}]},{"type":"text","value":" and you may never have to handle them manually. However, lets understand the default behavior of the exceptions."}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#invalidcredentialsexception"},"children":[{"type":"text","value":"InvalidCredentialsException"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#authenticationexception"},"children":[{"type":"text","value":"AuthenticationException"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"invalidcredentialsexception"},"children":[{"type":"element","tag":"a","props":{"href":"#invalidcredentialsexception","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"InvalidCredentialsException"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"auth.attempt"}]},{"type":"text","value":" method raises the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"InvalidCredentialsException"}]},{"type":"text","value":" when unable to lookup a user or not able verify the password. If not handled manually:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The request will be redirected back to the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"previous page"}]},{"type":"text","value":", along with error messages."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ajax requests or requests with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"accept = application/json"}]},{"type":"text","value":" header will receive errors as JSON instead of the redirect."}]}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> auth<span class=\"token punctuation\">.</span><span class=\"token function\">attempt</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>code <span class=\"token operator\">===</span> <span class=\"token string\">'E_INVALID_AUTH_UID'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// unable to find user using email address</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>code <span class=\"token operator\">===</span> <span class=\"token string\">'E_INVALID_AUTH_PASSWORD'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// password mis-match</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"authenticationexception"},"children":[{"type":"element","tag":"a","props":{"href":"#authenticationexception","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"AuthenticationException"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"auth.authenticate"}]},{"type":"text","value":" method raises the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"AuthenticationException"}]},{"type":"text","value":" when unable to find a valid session or unable to lookup the user from the session id. If not handled manually:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The request will be redirected back to the login page."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ajax requests or requests with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"accept = application/json"}]},{"type":"text","value":" header will receive an errors object with 401 status code."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When using "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"basic"}]},{"type":"text","value":" auth driver. The exception will response will contain "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"www-authenticate"}]},{"type":"text","value":" header."}]}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> auth<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// invalid session</span>\n<span class=\"token punctuation\">}</span>\n"}]}]}]}]}
