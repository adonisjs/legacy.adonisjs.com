{"type":"root","children":[{"type":"element","tag":"dimertitle","props":{},"children":[{"type":"text","value":"Basic Auth Guard"}]},{"type":"element","tag":"h1","props":{"id":"basic-auth-guard"},"children":[{"type":"element","tag":"a","props":{"href":"#basic-auth-guard","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Basic Auth Guard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The basic auth guard uses the "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#Basic_authentication_scheme"},"children":[{"type":"text","value":"HTTP Basic Auth"}]},{"type":"text","value":" for authenticating requests. By the end of this guide, you will be able to authenticate requests using the auth middleware."}]},{"type":"element","tag":"div","props":{"className":["toc-container"]},"children":[{"type":"element","tag":"h2","props":{},"children":[{"type":"text","value":"Table of contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#authenticating-requests"},"children":[{"type":"text","value":"Authenticating requests"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#whats-next"},"children":[{"type":"text","value":"What's next?"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"authenticating-requests"},"children":[{"type":"element","tag":"a","props":{"href":"#authenticating-requests","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"Authenticating requests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"no concept of login and logout"}]},{"type":"text","value":" with HTTP basic auth. The client is supposed to pass a base64 encoded string containing the user credentials as the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":" header. If the credentials are valid, the request will be permitted. Otherwise, AdonisJS will deny the request with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"WWW-Authenticate"}]},{"type":"text","value":" response header."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For demonstration, let's create a dummy route and use the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"auth"}]},{"type":"text","value":" middleware to force basic authentication."}]},{"type":"element","tag":"div","props":{"className":["alert","alert-note"]},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure, you have the "},{"type":"element","tag":"a","props":{"href":"/guides/auth/middleware#auth-middleware"},"children":[{"type":"text","value":"Auth middleware setup"}]},{"type":"text","value":" properly for your app."}]}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"start/routes.ts"}]},{"type":"element","tag":"pre","props":{"className":["language-ts","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Route\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> auth <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You are logged in as </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>auth<span class=\"token punctuation\">.</span>user<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>email<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">middleware</span><span class=\"token punctuation\">(</span><span class=\"token string\">'auth:basic'</span><span class=\"token punctuation\">)</span>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First lets use the CURL command to visit the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/posts"}]},{"type":"text","value":" route."}]},{"type":"element","tag":"div","props":{"className":["dimer-highlight"]},"children":[{"type":"element","tag":"pre","props":{"className":["language-sh","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"<span class=\"token function\">curl</span> -i http://localhost:3333/posts\n\n<span class=\"token comment\"># HTTP/1.1 401 Unauthorized</span>\n<span class=\"dimer-highlight-code-line\">www-authenticate: Basic <span class=\"token assign-left variable\">realm</span><span class=\"token operator\">=</span><span class=\"token string\">\"Login\"</span>, <span class=\"token assign-left variable\">charset</span><span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span></span><span class=\"token comment\"># content-length: 13</span>\n<span class=\"token comment\"># content-type: text/plain; charset=utf-8</span>\n<span class=\"token comment\"># Date: Mon, 10 Aug 2020 04:29:13 GMT</span>\n<span class=\"token comment\"># Connection: keep-alive</span>\n\nAccess denied\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you make the same request using a browser, it will prompt you to enter the credentials before showing "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Access denied"}]},{"type":"text","value":". The browsers shows the prompt only when the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"www-authenticate"}]},{"type":"text","value":" header is set."}]},{"type":"element","tag":"div","props":{"className":["embed","video"]},"children":[{"type":"element","tag":"video","props":{"controls":true},"children":[{"type":"element","tag":"source","props":{"src":"https://res.cloudinary.com/adonis-js/video/upload/v1597034375/adonisjs.com/adonis-basic-auth_n8ierd.mp4","type":"video/mp4"},"children":[]}]}]},{"type":"element","tag":"h2","props":{"id":"whats-next"},"children":[{"type":"element","tag":"a","props":{"href":"#whats-next","aria-hidden":true},"children":[{"type":"element","tag":"span","props":{"className":["icon","icon-link"]},"children":[]}]},{"type":"text","value":"What's next?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"handling-exceptions"},"children":[{"type":"text","value":"Understanding the flow"}]},{"type":"text","value":" of exceptions raised by the auth module."}]}]}]}
